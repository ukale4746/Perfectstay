{% extends "base.html" %}
{% block title %}Login - Perfect Stay{% endblock %}

{% block content %}
<section class="d-flex justify-content-center align-items-center vh-100 bg-light">
  <div class="card shadow-lg p-4 rounded-4 animate-fade" style="max-width: 420px; width: 100%;">
    <div class="text-center mb-4">
      <div class="mb-3">
        <i class="bi bi-person-circle text-danger" style="font-size: 3rem;"></i>
      </div>
      <h2 class="fw-bold text-dark">Welcome Back</h2>
      <p class="text-muted small">Login to continue your journey ✈️</p>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-danger text-center py-2 mb-3 rounded-3">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Login Form -->
    <form method="POST" action="{{ url_for('login') }}">
      <div class="mb-3">
        <input type="text" name="username" class="form-control form-control-lg rounded-3 hover-focus"
               placeholder="Enter your username" required>
      </div>
      <div class="mb-3 position-relative">
        <input type="password" id="password" name="password" class="form-control form-control-lg rounded-3 hover-focus"
               placeholder="Enter your password" required>
        <button type="button" class="btn btn-sm position-absolute top-50 end-0 translate-middle-y me-2 text-muted" 
                onclick="togglePassword()" style="border: none; background: none;">
          <i id="toggleIcon" class="bi bi-eye-slash"></i>
        </button>
      </div>
      <button type="submit" class="btn btn-danger w-100 rounded-3 fw-semibold hover-scale">Login</button>
    </form>

    <!-- Extra Links -->
    <div class="text-center mt-3">
      <small class="text-muted">
        Don't have an account? 
        <a href="{{ url_for('register') }}" class="text-danger text-decoration-none fw-semibold">Register here</a>
      </small>
    </div>
  </div>
</section>

<!-- Interactivity -->
<script>
  function togglePassword() {
    const password = document.getElementById("password");
    const icon = document.getElementById("toggleIcon");
    if (password.type === "password") {
      password.type = "text";
      icon.classList.remove("bi-eye-slash");
      icon.classList.add("bi-eye");
    } else {
      password.type = "password";
      icon.classList.remove("bi-eye");
      icon.classList.add("bi-eye-slash");
    }
  }
</script>

<!-- Custom Styling -->
<style>
  .hover-focus:focus {
    border-color: #dc3545 !important;
    box-shadow: 0 0 8px rgba(220, 53, 69, 0.25);
  }
  .hover-scale {
    transition: transform 0.3s ease-in-out;
  }
  .hover-scale:hover {
    transform: scale(1.05);
  }
  .animate-fade {
    opacity: 0;
    transform: translateY(15px);
    animation: fadeInUp 0.6s forwards;
  }
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
{% endblock %}
